var xjs;!function(t){"use strict";function n(){return{priority:0,transclude:!1,restrict:"EA",controller:t.InstagramBackgroundCtrl}}t.InstagramBackground=n}(xjs||(xjs={}));var xjs;!function(t){"use strict";var n=function(){function t(t,n,r){this.$element=t,this.$http=n,this.$interval=r,this.clientId=t.attr("client-id"),this.userId=t.attr("user-id"),this.fallback=t.attr("fallback"),this.init()}return t.prototype.init=function(){var n=this,r=t.FETCH_IMAGES_URL;r=r.replace(t.CLIENT_ID_PLACEHOLDER,this.clientId),r=r.replace(t.USER_ID_PLACEHOLDER,this.userId),this.$element.css("transition","background-image 4s ease-in-out");var a=this.$http.jsonp(r,null);a.success(function(r){var a=n.getListOfImages(r),e=n.getRandomImage(a);n.setBackground(e),n.$interval(function(){var t=n.getRandomImage(a);n.setBackground(t)},1e3*t.REFRESH_TIME)})},t.prototype.getRandomImage=function(t){var n=this.random(0,t.length);return t[n]},t.prototype.getListOfImages=function(n){if(n.code!==t.HTTP_STATUS_200)return[this.fallback];var r=[];return n.data.forEach(function(t){r.push(t.images.standard_resolution.url)}),r},t.prototype.setBackground=function(t){var n=new Image,r=this;n.onload=function(){r.$element.css("background-image","url("+this.src+")")},n.src=t},t.prototype.random=function(t,n){return Math.floor(Math.random()*n)+t},t.$inject=["$element","$http","$interval"],t.USER_ID_PLACEHOLDER="##USER-ID##",t.CLIENT_ID_PLACEHOLDER="##CLIENT-ID##",t.HTTP_STATUS_200=200,t.REFRESH_TIME=10,t.FETCH_IMAGES_URL="https://api.instagram.com/v1/users/##USER-ID##/media/recent/?client_id=##CLIENT-ID##&callback=JSON_CALLBACK",t}();t.InstagramBackgroundCtrl=n}(xjs||(xjs={}));var xjs;!function(t){"use strict";angular.module("xjs",[]).directive("ib",t.InstagramBackground)}(xjs||(xjs={}));